{{ define "main" }}

<!-- Full screen PDF viewer - loads immediately on all devices -->
<iframe id="pdf-viewer" 
        style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; border: none; margin: 0; padding: 0; z-index: 9999; display: block;" 
        src="{{ .Site.Params.pdf_file }}#view=FitH&toolbar=0&navpanes=0&scrollbar=0">
</iframe>

<script>
    // Force immediate PDF display on all devices
    (function() {
        const pdfViewer = document.getElementById('pdf-viewer');
        
        // Remove body margins for full screen
        document.body.style.margin = '0';
        document.body.style.padding = '0';
        document.body.style.overflow = 'hidden';
        document.body.style.backgroundColor = '#000';
        
        // Force iframe to be visible and focused
        pdfViewer.style.display = 'block';
        pdfViewer.focus();
        
        // Smart TV remote control support
        document.addEventListener('keydown', function(event) {
            // Prevent default behavior for volume keys
            event.preventDefault();
            
            // Volume Up / Arrow Up / PageDown / ArrowRight = Next page
            if (event.key === 'ArrowUp' || event.key === 'VolumeUp' || event.key === 'PageDown' || event.key === 'ArrowRight') {
                navigatePDF('next');
            }
            
            // Volume Down / Arrow Down / PageUp / ArrowLeft = Previous page  
            if (event.key === 'ArrowDown' || event.key === 'VolumeDown' || event.key === 'PageUp' || event.key === 'ArrowLeft') {
                navigatePDF('prev');
            }
        });
        
        // PDF navigation function
        function navigatePDF(direction) {
            try {
                // Focus on iframe and send keyboard events
                pdfViewer.contentWindow.focus();
                
                const keyEvent = direction === 'next' ? 
                    new KeyboardEvent('keydown', { key: 'ArrowRight', bubbles: true }) : 
                    new KeyboardEvent('keydown', { key: 'ArrowLeft', bubbles: true });
                    
                pdfViewer.contentWindow.dispatchEvent(keyEvent);
                console.log('PDF navigation:', direction);
            } catch (error) {
                console.log('Navigation attempted:', direction);
            }
        }
        
        // Ensure PDF gets focus on load
        pdfViewer.addEventListener('load', function() {
            setTimeout(function() {
                pdfViewer.contentWindow.focus();
            }, 500);
        });
        
        // Focus on window click/touch for mobile
        document.addEventListener('click', function() {
            pdfViewer.contentWindow.focus();
        });
        
        document.addEventListener('touchstart', function() {
            pdfViewer.contentWindow.focus();
        });
    })();
</script>

{{ end }}
